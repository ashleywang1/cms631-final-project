<!DOCTYPE html>
<html>
<head>
    <title>100 Years</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.1/css/bulma.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <script src="https://maps.google.com/maps/api/js?sensor=false&key=AIzaSyB9R73RQs2X2n3J8xpPKez_1hotrCwInH8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.3/vue.min.js"></script>
    <script src="js/commute.js"></script>
    <script src="js/logger.js"></script>
    <style>



        main {
            width: 100%;
        }

        .vertical-padding {
            padding-top: 16px;
            padding-bottom: 16px;
        }

        iframe.interactive {
            width: 900px;
            height: 600px;
            border: none;
            overflow: none;
        }

        #map {
            height: 100%;
        }

        input[type="radio"] {
            visibility:hidden;
        }
        .mode {
            cursor: pointer;
        }
        input[type="radio"]:checked + .mode {
            border-color: #4a4a4a;
            box-shadow: inset 0 1px 2px rgba(10, 10, 10, 0.2);
            color: #363636;
        }
    </style>
</head>
<body>
    <section class="hero is-danger">
        <div class="hero-body">
            <div class="container">
                <h1 class="title is-1">
                    100 Years
                </h1>
                <h2 class="subtitle">
                    an interactive exploration of climate change
                </h2>
            </div>
        </div>
    </section>
    <main>
        <section class="hero is-light vertical-padding">
            <div class="container">
                <p>
                    Our planet is warming. Over the past 130 years, average global temperatures have
                    increased by 1.2 °C, or about 2 °F. While a few skeptics
                    argue about the specific cause for this rise in global temperatures, 97% of climate
                    scientists believe the largest contributor is the greenhouse gases like carbon
                    dioxide and methane that we release into the atmosphere all day, every day.
                </p>
                <div class="has-text-centered vertical-padding">
                    <p>
                        How do you think average global temperatures will change in the future if we
                        continue emitting greenhouse gases at our current rate?
                    </p>
                    <figure class="has-text-centered vertical-padding">
                        <iframe class="interactive" src="app/temperature.html" scrolling="no"></iframe>
                    </figure>
                    <div v-if="temperature.drew" style="background:red;">
                        temporary trigger different text:
                        <button @click="temperature.status='right'">right</button>
                        <button @click="temperature.status='wrong'">wrong</button>
                        <button @click="temperature.status='underestimate'">underestimate</button>
                        <button @click="temperature.status='overestimate'">overestimate</button>
                        <button @click="temperature.status='slight_underestimate'">slight_underestimate</button>
                        <button @click="temperature.status='slight_overestimate'">slight_overestimate</button>
                    </div>
                </div>
                <div v-if="temperature.drew" class="vertical-padding">
                    <div v-if="temperature.status == 'right'" class="notification is-primary">
                        Wow, you’re spot-on! Only {{stats.pct_right}}% of our users’ predictions align precisely with those
                        of scientists, who estimate that average global temperatures will rise by 3.6 °C by the year 2100, or roughly 6.5 °F, if the US and the rest
                        of the world don’t take significant action to curb greenhouse gas emissions. That’s
                        the difference between a warm spring day in the mid-60’s and a toastier summer day
                        in the low 70’s.
                    </div>
                    <div v-if="temperature.status == 'wrong'" class="notification is-warning">
                        It looks like you thought global temperatures will go down in the future. However,
                        scientists actually predict that if the US and the rest of the world don’t take
                        significant action to curb greenhouse gas emissions, average global temperatures
                        will rise by 3.6 °C by the year 2100, or roughly 6.5 °F. That’s the difference between a pleasant spring day in the mid-60’s
                        and a toastier summer day in the low 70’s.
                    </div>
                    <div v-if="temperature.status == 'underestimate'" class="notification is-warning">
                        It looks like you thought global temperatures will go up in the future. You’re
                        absolutely right, but like {{stats.pct_under}}% of our users, you underestimated how much temperatures
                        will increase. Scientists actually predict that if the US and the rest of the world
                        don’t take significant action to curb greenhouse gas emissions, average global
                        temperatures will rise by 3.6 °C by the year 2100, or roughly 6.5 degrees
                        Fahrenheit. That’s the difference between a pleasant spring day in the mid-60’s and
                        a toastier summer day in the low 70’s.
                    </div>
                    <div v-if="temperature.status == 'overestimate'" class="notification is-primary">
                        It looks like you thought global temperatures will go up in the future. You’re
                        absolutely right, but like {{stats.pct_over}}% of our users, you overestimated how much temperatures will
                        increase. Scientists actually predict that if the US and the rest of the world don’t take
                        significant action to curb greenhouse gas emissions, average global temperatures will
                        rise by 3.6 °C by the year 2100, or roughly 6.5 °F. That’s
                        the difference between a pleasant spring day in the mid-60’s and a toastier summer day
                        in the low 70’s.
                    </div>
                    <div v-if="temperature.status == 'slight_underestimate'" class="notification is-warning">
                        It looks like you thought global temperatures will go up in the future. You’re absolutely
                        right, but like {{stats.pct_sunder}}% of our users, you underestimated how much temperatures will increase.
                        You were really close though! Scientists actually predict that if the US and the rest of
                        the world don’t take significant action to curb greenhouse gas emissions, average global
                        temperatures will rise by 3.6 °C by the year 2100, or roughly 6.5 °F. That’s the difference
                        between a pleasant spring day in the mid-60’s and a toastier summer day in the low 70’s.
                    </div>
                    <div v-if="temperature.status == 'slight_overestimate'" class="notification is-primary">
                        It looks like you thought global temperatures will go up in the future. You’re absolutely
                        right, but like {{stats.pct_sover}}% of our users, you overestimated how much temperatures will increase.
                        You were really close though! Scientists actually predict that if the US and the rest of
                        the world don’t take significant action to curb greenhouse gas emissions, average global
                        temperatures will rise by 3.6 °C by the year 2100, or roughly 6.5 °F. That’s the difference between
                        a pleasant spring day in the mid-60’s and a toastier summer day in the low 70’s.
                    </div>
                </div>
                <p>
                    This may not seem like a big difference, but 3.6 °C (6.5 °F) of warming would have devastating
                    impacts, including rising sea levels and increased coastal flooding due to melting ocean ice, a
                    dramatic increase in severe storms, long-lasting droughts, and the spread of diseases like malaria
                    and Zika to new parts of the globe.
                </p>
                <br/>
                <p>
                    Fortunately, in 2016, the US became one of 185 nations to sign on to the historic Paris climate
                    agreement, which aims to keep that increase in global temperatures to a far less drastic 1.5 °C,
                    or just over 2.5°F.
                </p>
            </div>
        </section>
        <section class="hero is-dark vertical-padding">
            <div class="container">
                <p>
                    The graph below shows how much greenhouse gases the US emitted in 2005. How much do you think we would have to cut those emissions to meet our commitments under the Paris agreement?
                </p>
                <figure class="has-text-centered vertical-padding">
                    <iframe class="interactive" src="js/bubbles.html" scrolling="no"></iframe>
                </figure>
                <div v-if="co2.drew" class="vertical-padding">
                    <div v-if="co2.decrease" class="notification is-warning">
                      It looks like you thought the co2 would go down. Don't feel bad, X% of people thought so too! In
                        reality, however, we think Y.
                    </div>
                    <div v-if="!co2.decrease" class="notification is-primary">
                        Great! You are correct. I don't know what to say here so I'm just typing random things now!
                    </div>
                </div>
                <p>
                    In order for the United States to live up to its promise in the Paris agreement, it will have to cut its greenhouse gas emissions by 26 to 28 percent of 2005 levels by 2025.
                </p>
                <p>
                    The bad news: Without an increased effort on the part of Americans to release fewer greenhouse gases, we will fail to reach that goal. Under current and soon-to-be-implemented policies alone, the US will only be able to curb its emissions by 7 to 21 percent of 2005 levels.
                </p>
            </div>
        </section>
        <section class="hero is-light vertical-padding">
            <div class="container">
                <p>
                    As we can see in the section above, transportation is the second-largest contributor to American greenhouse gas emissions. By changing the way we commute, we can go a long way towards helping our nation hit its Paris target. Let's take a look at <strong>your</strong> commuting habits!
                </p>
                <figure class="has-text-centered vertical-padding">
                    <div class="container">
                        <iframe class="interactive" src="app/fuelEfficiency.html" scrolling="no"></iframe>
                    </div>
                </figure>
                <br/>
                <div class="column is-6 is-offset-3">
                    <div class="card">
                      <header class="card-header">
                        <p class="card-header-title">
                          How much CO2 does your commute produce?
                        </p>
                        <a class="card-header-icon">
                          <span class="icon">
                            <i class="fa fa-question-circle"></i>
                          </span>
                        </a>
                      </header>
                      <div class="card-content">
                        <div class="content">
                            <p> What is your route? </p>
                            <div class="field">
                              <p class="control">
                                <input class="input" type="text" placeholder="Origin" v-model="emissions.origin"/>
                              </p>
                            </div>
                            <div class="field">
                              <p class="control">
                                <input class="input" type="text" placeholder="Destination" v-model="emissions.destination"/>
                              </p>
                            </div>
                            <p> What mode of transportation do you use? </p>
                            <div class="block" align="center">
                              <input type="radio" id="car" value="CAR" v-model="emissions.travel_mode"></input>
                              <label class="button mode" for="car"><i class="fa fa-car" aria-hidden="true"></i></label>
                              <input type="radio" id="bus" value="BUS" v-model="emissions.travel_mode"></input>
                              <label class="button mode" for="bus"><i class="fa fa-bus" aria-hidden="true"></i></label>
                              <input type="radio" id="bike" value="BIKE" v-model="emissions.travel_mode"></input>
                              <label class="button mode" for="bike"><i class="fa fa-bicycle" aria-hidden="true"></i></label>
                            </div>
                            <div class="field">
                                <p class="has-text-right">
                                    <button id="calculate_emissions" class="button is-primary" @click="compute_emissions">Calculate</button>
                                </p>
                            </div>
                        </div>
                      </div>
                    </div>
                    <br>
                </div>

                <div v-if="emissions.result">
                  <!-- <div class="my-container" style="position:relative;height:25%;width:25%;">
                        <img src="img/footprint.png"/>
                        <img src="img/FootprintUser.png" style="position:absolute;height:50%;width:50%;top:0;left:0;"/>
                  </div> -->
                    <p class="vertical-padding" v-if="emissions.travel_mode == 'CAR'">
                        Your <b>{{emissions.result.distance_in_meters/1000}} km</b> drive to work emits <strong>{{emissions.result.car}} lbs</strong> of carbon dioxide. Over the course of a year, that adds up to <strong>{{emissions.result.car_yearly}} lbs</strong>.
                    </p>
                    <p class="vertical-padding" v-if="emissions.travel_mode == 'BUS'">
                        Your <b>{{emissions.result.transit_distance/1000}} km</b> route to (and from?) work emits <strong>{{emissions.result.bus}} lbs</strong> of carbon dioxide. Over the course of a year, that adds up to <strong>{{emissions.result.bus_yearly}} lbs</strong>.
                    </p>

                    <p class="vertical-padding" v-if="emissions.travel_mode == 'BIKE'">

                        Your <b>{{emissions.result.bike_distance_in_meters/1000}} km</b> bike to (and from?) work emits <strong>{{emissions.result.bike}} lbs</strong> of carbon dioxide. Over the course of a year, that adds up to <strong>{{emissions.result.bike_yearly}} lbs</strong>.
                    </p>

                    <p class="vertical-padding" v-if="emissions.result.car > 66">
                        Your commute seems to be far more than an hour long! You are creating more than 66 lbs of carbon per commute. That's about the size of a Dalmatian! I'm so sorry for you :( , and we can't create a graphic in that case because your carbon footprint is too big.
                    </p>

                    <p class="vertical-padding" v-if="emissions.result.has_transit && emissions.result.pct_saving_if_bus > 0">
                        Lucky for you, there’s a bus route that can get you to work.  By taking the bus, you could cut your emissions by
                        <b>{{emissions.result.pct_saving_if_bus}}%</b>. Having just one driver switch to public transportation can reduce
                        the typical American household’s annual carbon footprint by <a href = "https://www.transit.dot.gov/sites/fta.dot.gov/files/docs/PublicTransportationsRoleInRespondingToClimateChange2010.pdf">over 8 percent</a>! Imagine what the impact would be if
                        millions of Americans made that simple change!


                        <div style="text-align: center">
                            <div class="my-container" style="position: relative; width: 50%; margin-left:25%;">
                                  <img src="img/Footprint.png"/>
                                  <img src="img/FootprintUser.png" style="position:absolute;top:50%;left:50%; transform:translate(-50%, -50%);" :style="{width: 100 - emissions.result.pct_saving_if_bus + '%', height: 100 -emissions.result.pct_saving_if_bus + '%'}"/>
                            </div>
                        </div>
                    </p>

                    <p class="vertical-padding" v-if="emissions.result.has_transit && emissions.result.pct_saving_if_bus < 0">
                        It looks like it actually produces more. However, it's going to go on the route anyways so...
                    </p>

                    <p class="vertical-padding" v-if="emissions.result.distance_in_meters < 5000">
                        {{emissions.result.has_transit ? "It" : "Fortunately, it"}} looks like you work close enough to home to bike or walk there.
                        By biking or walking, you could reduce your emissions by <b>{{emissions.result.pct_saving_if_bike}}%</b>.
                        Replacing cars with bikes also reduces traffic congestion, increases air quality, improves physical fitness,
                        and saves you money on gasoline and car maintenance. And during rush hour, biking could even get you to work (or back home)
                        more quickly than driving!

                        <div style="text-align: center">
                            <div class="my-container" style="position: relative; width: 50%; margin-left:25%;">
                                  <img src="img/Footprint.png"/>
                                  <img src="img/FootprintUser.png" style="position:absolute;top:50%;left:50%; transform:translate(-50%, -50%);" :style="{width: 100-emissions.result.pct_saving_if_bike + '%', height: 100-emissions.result.pct_saving_if_bike + '%'}"/>
                            </div>
                        </div>
                       </p>
                    <p class="vertical-padding" v-if="!emissions.result.has_transit && !emissions.result.distance_in_meters < 5000">
                      Unfortunately, it looks like there’s no easy way for you to get to work by bus, and it’s too far to bike or walk.
                      But you can still help the US reach its Paris target by carpooling, since every extra passenger in your car means
                      one fewer car on the road. And when you’re in the market for a new car, consider purchasing a more energy-efficient
                      one - it will not only shrink your carbon footprint, but it could even save you money in the long run by reducing
                      the amount of gasoline you buy. For more information on cutting the environmental impact of your commute, check
                      out the US Department of Energy’s <a href = "http://www.fueleconomy.gov/feg/drive.shtml"> gas mileage tips</a>.
                    </p>
                </div>
            </div>
        </section>
        <section class="hero is-primary is-medium">
            <div class="hero-body">
                <div class="container has-text-centered">
                    <h2 class="title">
                        Will you help the US avoid breaking its promise <br/>
                        to the rest of the world? It’s as easy as <br/>
                        changing the way you get to work.
                    </h2>
                    <br/>
                    <h2>
                        And while you’re at it, take a few moments to show support for <br/>
                        environmentally friendly energy and climate policies by signing <br/>
                        these petitions and calling your Congressional representatives.
                    </h2>
                </div>
            </div>
        </section>
    </main>
    <footer class="footer">
        <div class="container is-dark">
            <div class="content has-text-centered">
                <p>
                    <strong>100 Years</strong> by Ashley, Brandon, <a href="http://www.kevz.me">Kevin</a>, Nikki, and Nina.
                </p>
                <p>
                    <a class="icon" href="https://github.com/k15z/cms631-final-project">
                        <i class="fa fa-github"></i>
                    </a>
                </p>
            </div>
        </div>
    </footer>
    <script>
        Logger.log({"event": "page_load"});
        const vm = new Vue({
            el: "main",
            data: {
                stats: {
                    pct_right: 10,
                    pct_under: 40,
                    pct_over: 10,
                    pct_sunder: 10,
                    pct_sover: 30
                },
                temperature: {
                    drew: false,
                    status: null
                },
                co2: {
                    drew: false,
                    decrease: null
                },
                emissions: {
                    origin: "",
                    destination: "",
                    travel_mode: "",
                    result: false
                }
            },
            methods: {
                update_temp: function (status) {
                    var self = this;
                    self.temperature.drew = true;
                    self.temperature.status = status;
                    Logger.log({"event": "temperature", status});
                },
                update_co2: function (path) {
                    var self = this;
                    var distance_from_top_1 = path[1][1];
                    var distance_from_top_2 = path[_.size(path)-1][1];
                    self.co2.drew = true;
                    self.co2.decrease = distance_from_top_2 > distance_from_top_1;
                },
                compute_emissions: function () {
                    var self = this;
                    if (self.emissions.origin == "" || self.emissions.destination == "") {
                        alert("Please fill in your route details!");
                        return;
                    }
                    if (self.emissions.travel_mode == "") {
                        alert("Please choose a transporation mode!");
                        return;
                    }

                    console.log(self.emissions.origin);
                    console.log(self.emissions.destination);
                    getCommute(self.emissions.origin, self.emissions.destination, function (res) {
                        self.emissions.result = res;
                    })
                }
            }
        });
        update_temp = vm.update_temp;
        update_co2 = vm.update_co2;

        $.get("https://api.myjson.com/bins/toguh", function (arr) {
            var total = 0;
            var counts = {
                "right": 0,
                "wrong": 0,
                "overestimate": 0,
                "underestimate": 0,
                "slight_overestimate": 0,
                "slight_underestimate": 0
            };
            for (var i = 0; i < arr.length; i++)
                if (arr[i].data.event == "temperature") {
                    counts[arr[i].data.status]++;
                    total++;
                }
            vm.stats.pct_right = Math.round(100.0 * counts.right / total)
            vm.stats.pct_wrong = Math.round(100.0 * counts.wrong / total)
            vm.stats.pct_under = Math.round(100.0 * counts.underestimate / total)
            vm.stats.pct_over = Math.round(100.0 * counts.overestimate / total)
            vm.stats.pct_sunder = Math.round(100.0 * counts.slight_underestimate / total)
            vm.stats.pct_sover = Math.round(100.0 * counts.slight_overestimate / total)
        })

    </script>
</body>
</html>
